# ============================================================
# Code Risk Guard - Environment Configuration
# ============================================================
# Copy this file to .env and fill in your actual values
# This file should be placed at: dags/src/.env

# ============================================================
# REPOSITORY CONFIGURATION
# ============================================================

# Single repository (legacy, for backward compatibility)
GITHUB_REPO=mmenalla/readlike-me

# Multiple repositories (JSON array format)
# Used by multi-repo training DAGs
GITHUB_REPOS=["scikit-learn/scikit-learn", "pandas-dev/pandas", "huggingface/transformers"]

# GitHub Personal Access Token
# Generate at: https://github.com/settings/tokens
# Required scopes: repo (for private repos), public_repo (for public repos)
GITHUB_TOKEN=your_github_token_here

# ============================================================
# LOCAL REPOSITORY PATHS
# ============================================================

# Base directory where cloned repositories are stored
# Example: /Users/username/Documents/TechDebtPOC/TDGPTRepos
REPO_BASE_DIR=/repos/TDGPTRepos

# Repository names (must match directory names in REPO_BASE_DIR)
# JSON array format - order must match GITHUB_REPOS
REPO_NAMES=["scikit-learn", "pandas", "transformers", "kubernetes", "numpy", "TechDebtGPT", "tech-debt-api", "code-risk-guard"]

# Default branch name
BRANCH_NAME=main

# Per-repository branch mapping (optional)
# JSON object format: {"repo_name": "branch_name"}
REPO_BRANCHES={"scikit-learn": "main", "pandas": "main", "transformers": "main"}

# Single repository path (legacy)
REPO_PATH=/repos/readlike-me

# ============================================================
# SONARQUBE CONFIGURATION
# ============================================================

# SonarQube Server URL
# For Docker container-to-container: http://sonarqube:9000
# For local browser access: http://localhost:9000
# For SonarCloud: https://sonarcloud.io
SONARQUBE_URL=http://sonarqube:9000

# SonarQube Authentication Token
# Generate at: My Account > Security > Generate Token
# For SonarCloud: My Account > Security > Tokens
SONARQUBE_TOKEN=sqp_your_sonarqube_token_here

# SonarQube Project Keys (JSON array, must match order of REPO_NAMES)
# These are the project keys in SonarQube, not repository names
# Example: ["sklearn", "pandas", "transformers"]
SONARQUBE_PROJECT_KEYS=["TechDebtGPT", "backend-api", "charts", "tech-debt-api", "tech-debt-services", "scikit-learn", "pandas", "transformers", "numpy", "flask", "react", "express", "kubernetes"]

# ============================================================
# DATA COLLECTION CONFIGURATION
# ============================================================

# Time window for historical data (days)
# Used by temporal analysis to look back in time
SINCE_DAYS=150

# Window size for multi-window degradation model (days)
# Used by risk_model_training_degradation_dag
WINDOW_SIZE_DAYS=150

# Maximum number of Pull Requests to analyze per repository
MAX_PRS=50

# Maximum number of commits to analyze per repository
MAX_COMMITS=10000

# Enable commit-based analysis (alternative to PR-based)
USE_COMMITS=True

# ============================================================
# MODEL TRAINING CONFIGURATION
# ============================================================

# Model filename
MODEL_NAME=xgboost_degradation_model.pkl

# Enable hyperparameter tuning (slower but better RÂ²)
# Set to "true" for production training, "false" for quick testing
TUNE_HYPERPARAMETERS=true

# ============================================================
# JIRA INTEGRATION (Optional)
# ============================================================

# JIRA Server URL
# Example: https://your-company.atlassian.net
JIRA_URL=https://your-company.atlassian.net

# JIRA Username/Email
JIRA_USER=your-email@company.com

# JIRA API Token
# Generate at: https://id.atlassian.com/manage-profile/security/api-tokens
JIRA_API_TOKEN=your_jira_api_token_here

# JIRA Project Key for created tickets
JIRA_PROJECT_KEY=TECH

# ============================================================
# TICKET GENERATION (Optional)
# ============================================================

# Enable automatic ticket generation for high-risk files
GENERATE_TICKETS=False

# Risk score threshold for ticket generation (0.0 to 1.0)
# Files with predicted risk >= threshold will get tickets
RISK_SCORE_THRESHOLD=0.2

# Number of tickets to generate per high-risk module
NUM_TICKETS_PER_MODULE=1

# ============================================================
# LLM CONFIGURATION (Optional)
# ============================================================

# OpenAI API Key (for ticket generation with GPT)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# ============================================================
# MONGODB CONFIGURATION
# ============================================================

# MongoDB Connection URI (configured in docker-compose.yml)
# Default for Docker setup: mongodb://admin:admin@mongo:27017/risk_model_db?authSource=admin
MONGO_URI=mongodb://admin:admin@mongo:27017/risk_model_db?authSource=admin

# MongoDB Database Name
MONGO_DB=risk_model_db
